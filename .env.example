# ============================================================================
# VECTRA - Environment Configuration
# ============================================================================

# ----------------------------------------------------------------------------
# 1. CORE SETTINGS
# ----------------------------------------------------------------------------
# ENV: Sets the execution environment ('development', 'test', 'production').
#      In 'production', the app enforces strict security checks (e.g. strong passwords).
ENV=development

# DEBUG: Toggles detailed error tracebacks in API responses.
#        MUST be set to 'false' in production.
DEBUG=true

# LOG_LEVEL: Controls the verbosity of backend logs output to the console.
#            Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=DEBUG

# VECTRA_FRONTEND_PORT: The port used to access the web interface.
#                      Change this if port 80 or 9000 is already in use.
#                      (Default: 9000)
VECTRA_FRONTEND_PORT=9000

# ----------------------------------------------------------------------------
# 2. SECURITY & AUTH
# ----------------------------------------------------------------------------
# IMPORTANT: The keys below are used to encrypt JWT tokens and secure internal 
# communication between API and Worker. 
# 
# ⚠️ FOR PRODUCTION: You MUST generate new secure secrets!
# Why? The default keys below are written in the source code of this open-source
# project. Anyone could use them to forge admin tokens and hack your deployment.
#
# Generate keys using: python -c "import secrets; print(secrets.token_hex(32))"
#
SECRET_KEY=your_secret_key_here
WORKER_SECRET=your_worker_secret_here

# BACKEND_CORS_ORIGINS: Comma-separated list of allowed origins for browser access.
#                      Must include the IP/domain + port of your frontend 
#                      if accessing Vectra from another machine.
#                      (Example: "http://192.168.2.78:9000,http://vectra.ai")
BACKEND_CORS_ORIGINS=http://localhost:9000

# Initial Administrator Account
# This user will be created automatically on the very first startup.
FIRST_SUPERUSER=admin@vectra.ai
FIRST_SUPERUSER_PASSWORD=change_this_password!

# ----------------------------------------------------------------------------
# 3. DATABASE & INFRASTRUCTURE
# ----------------------------------------------------------------------------
# IMPORTANT: The values below (using 'localhost') are defaults used ONLY when 
# running the backend NATIVELY (e.g. via 'python main.py' during development).
# 
# When deploying with Docker (via docker-compose.yml), these local values 
# are automatically OVERRIDDEN by the internal Docker network hostnames 
# (e.g., 'vectra-postgres', 'vectra-qdrant', 'vectra-redis').

# Relational Database (PostgreSQL)
DATABASE_URL=postgresql+asyncpg://vectra:vectra@localhost:5432/vectra

# DB Connection Pooling
# DB_POOL_SIZE: Number of permanent connections to keep open (Default: 20)
DB_POOL_SIZE=20
# DB_MAX_OVERFLOW: Extra connections allowed beyond the pool size (Default: 10)
DB_MAX_OVERFLOW=10
# DB_POOL_RECYCLE: Time (seconds) after which a connection is closed and recreated (Default: 3600)
DB_POOL_RECYCLE=3600

# Vector Database (Qdrant)
QDRANT_HOST=localhost
QDRANT_API_KEY=c7-xIoFufnCRm_E8XT1nVpAsTDqqnXbP8t3oEu1qr84

# Caching & Job Queues (Redis)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=vectra_redis_2026
REDIS_DB=0

# ----------------------------------------------------------------------------
# 4. STORAGE & PATHS
# ----------------------------------------------------------------------------
# VECTRA_DATA_PATH is the absolute path on your host machine acting as the bridge 
# to access local files from within the application (e.g. for "Folder Connectors").
# It is also used to store temporary file uploads before they are vectorized.
# This folder is mounted directly to the '/data' directory inside the Docker containers.
# (Note: Database volumes like Postgres/Qdrant are stored separately in Docker volumes).
#
# Examples depending on your Operating System:
# - Windows: D:/VectraFiles  or  C:/Users/YourUsername/VectraData
# - Linux:   /opt/vectra_data  or  /home/yourusername/vectra_data
# - macOS:   /Users/yourusername/vectra_data
VECTRA_DATA_PATH=/path/to/your/data

# ----------------------------------------------------------------------------
# 5. INITIAL AI CONFIGURATION
# ----------------------------------------------------------------------------
# Note: These values define the INITIAL DEFAULTS before the first startup.
# They act as a fallback. If you modify these settings from the Web UI, 
# the database values will override this .env file.

# Default embedding provider (Options for local usage: ollama, local)
# Note: 'gemini' and 'openai' require their respective API keys to work.
EMBEDDING_PROVIDER=ollama

# Default URLs for local Ollama instances
# (Use 'http://127.0.0.1:11434' locally, or 'http://host.docker.internal:11434' in Docker)
OLLAMA_BASE_URL=http://127.0.0.1:11434
LOCAL_EXTRACTION_URL=http://127.0.0.1:11434

# Default models used for embeddings and local extraction
OLLAMA_EMBEDDING_MODEL=bge-m3

# LOCAL_EXTRACTION_MODEL: The model used for chat and analysis.
#                          Options: mistral (High quality, slow on CPU)
#                                   llama3.2:1b (Ultra fast on CPU, good bilingue)
#                                   phi3:mini (Smart but mostly English)
LOCAL_EXTRACTION_MODEL=mistral



# ----------------------------------------------------------------------------
# 6. PGADMIN CONFIGURATION
# ----------------------------------------------------------------------------
# PGADMIN_DEFAULT_PASSWORD: The password for the pgAdmin web interface.
#                           (Default: 'vectra_admin_2026')
PGADMIN_DEFAULT_PASSWORD=vectra
